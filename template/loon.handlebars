#!name = {{@package 'displayName'}}
#!desc = {{inline (@package 'description')}}
#!openUrl = {{@package 'openUrl'}}
#!author = {{@package 'contributors'}}
#!homepage = {{@package 'homepage'}}
#!icon = {{@package 'icon'}}
#!tag = {{@package 'organizationName'}}
#!system = {{@package 'system'}}
#!date = {{now "yyyy-MM-dd HH:mm:ss"}}
#!version = {{@package 'version'}}
#!system_version = {{ @package 'systemVersion'}}

[Argument]
{{{arguments}}}

[Script]
http-response ^https?:\/\/api\.spotify\.com\/v1\/tracks\? requires-body=1, script-path=https://github.com/DualSubs/Spotify/releases/download/v{{@package 'version'}}/response.bundle.js, tag=üçøÔ∏è DualSubs.Spotify.Tracks.response.json, argument={{{scriptParams}}}

http-request ^https?:\/\/spclient\.wg\.spotify\.com\/color-lyrics\/v2\/track\/(.+)\?(.*)format=json requires-body=1, script-path=https://github.com/DualSubs/Spotify/releases/download/v{{@package 'version'}}/request.bundle.js, tag=üçøÔ∏è DualSubs.Spotify.Lyrics.request.json, argument={{{scriptParams}}}
http-request ^https?:\/\/spclient\.wg\.spotify\.com\/color-lyrics\/v2\/track\/\w+\?(.*) requires-body=1, binary-body-mode=1, script-path=https://github.com/DualSubs/Spotify/releases/download/v{{@package 'version'}}/request.bundle.js, tag=üçøÔ∏è DualSubs.Spotify.Lyrics.request.proto, argument={{{scriptParams}}}

http-response ^https?:\/\/spclient\.wg\.spotify\.com\/color-lyrics\/v2\/track\/(.+)\?(.*)format=json(.*)subtype=Translate requires-body=1, script-path=https://github.com/DualSubs/Universal/releases/latest/download/Translate.response.bundle.js, tag=üçøÔ∏è DualSubs.Spotify.Translate.Lyrics.response.json, argument={{{scriptParams}}}
http-response ^https?:\/\/spclient\.wg\.spotify\.com\/color-lyrics\/v2\/track\/\w+\?(.*)subtype=Translate requires-body=1, binary-body-mode=1, script-path=https://github.com/DualSubs/Universal/releases/latest/download/Translate.response.bundle.js, tag=üçøÔ∏è DualSubs.Spotify.Translate.Lyrics.response.proto, argument={{{scriptParams}}}

http-response ^https?:\/\/spclient\.wg\.spotify\.com\/color-lyrics\/v2\/track\/(.+)\?(.*)format=json(.*)subtype=External requires-body=1, script-path=https://github.com/DualSubs/Universal/releases/latest/download/External.Lyrics.response.bundle.js, tag=üçøÔ∏è DualSubs.Spotify.External.Lyrics.response.json, argument={{{scriptParams}}}
http-response ^https?:\/\/spclient\.wg\.spotify\.com\/color-lyrics\/v2\/track\/\w+\?(.*)subtype=External requires-body=1, binary-body-mode=1, script-path=https://github.com/DualSubs/Universal/releases/latest/download/External.Lyrics.response.bundle.js, tag=üçøÔ∏è DualSubs.Spotify.External.Lyrics.response.proto, argument={{{scriptParams}}}

[MITM]
hostname = api.spotify.com, spclient.wg.spotify.com
